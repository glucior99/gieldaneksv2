<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin</title>

<style>
body {
    font-family: Arial, sans-serif;
}

.tabs a {
    margin-right: 15px;
    font-weight: bold;
    text-decoration: none;
}

.tabs a.active {
    color: red;
    text-decoration: underline;
}

.material-box {
    border: 3px solid #000;
    padding: 10px;
    margin-bottom: 25px;
}

table, th, td {
    border: 1px solid #333;
    border-collapse: collapse;
    padding: 5px;
}

th {
    background: #eee;
}
</style>
</head>

<body>

<h1>Panel admina</h1>
<a href="/logout" style="position:fixed;top:10px;right:10px;">Wyloguj</a>

<hr>

<h2>Dodaj giełdę</h2>
<form method="post">
    <input name="exchange_name" required>
    <button>Dodaj</button>
</form>

<hr>

<h2>Giełdy</h2>
<div class="tabs">
    {% for ex_id, ex_name in all_exchanges %}
        <a href="/admin?exchange_id={{ ex_id }}"
           class="{% if selected_exchange == ex_id %}active{% endif %}">
            {{ ex_name }}
        </a>
    {% endfor %}
    <a href="/admin" {% if not selected_exchange %}class="active"{% endif %}>
        [Wszystkie]
    </a>
</div>

<hr>

{% for ex_id, ex_name, mats in exchange_data %}
<h2>{{ ex_name }}</h2>

<form method="post">
    <input type="hidden" name="exchange_id" value="{{ ex_id }}">
    <input name="material_name" required>
    <button>Dodaj materiał</button>
</form>

<hr>

{% for m in mats %}
<div class="material-box">

<h3>Materiał: {{ m[1] }}</h3>

<table>
<tr>
    <th>Użytkownik</th>
    <th>Cena</th>
    <th>Średnia</th>
    <th>Odchylenie</th>
    <th>MAX (user)</th>
    <th>MIN (user)</th>
    <th>Różnica %</th>
</tr>

{% for s in stats_by_exchange[ex_id] %}
    {% if s[0] == m[1] %}
    <tr>
        <td>{{ s[1] }}</td>
        <td>{{ s[2] }}</td>
        <td>{{ s[3] }}</td>
        <td>{{ s[4] }}</td>
        <td>{{ s[5] }}</td>
        <td>{{ s[6] }}</td>
        <td>{{ s[7] }}%</td>
    </tr>
    {% endif %}
{% endfor %}

</table>

</div>
{% endfor %}

<hr>
{% endfor %}

</body>
</html>
